import java.awt.event.KeyEvent;
import java.awt.event.KeyListener;
import javax.swing.*;
import java.util.*;
import java.awt.Graphics;

public class Spielschleife implements Runnable{
    private boolean laeuft=true;
    
    private Spielfeld spielfeld;
    private Steuerung steuerung;
    
    private List<Hindernis> hindernisse;
    private List<Einheit> einheiten;
    Thread gameloop;
    public Spielschleife(Spielfeld feld, Spieler spieler){
        spielfeld = feld;
        
        steuerung = new Steuerung(spieler);
        feld.addKeyListener(steuerung);
        
        gameloop = new Thread (this);
        gameloop.start();
    }

    public void run(){
        Date schlafzeit=new Date();
        while(laeuft){          
            spielfeld.weltAusschnittErmitteln();
            spielfeld.einheitenPostionBerechnen();
            spielfeld.zeichenreihenfolgeFestlegen();
            
            steuerung.indirektesInputUeberpruefung();
            
            try {
                long t=(schlafzeit.getTime()+   25   )-(new Date()).getTime();

                spielfeld.repaint();
                if(t>0){ Thread.sleep(25); };
                schlafzeit=new Date();
            } catch (InterruptedException e) {}
        }
    }
    
    public void spielPausieren(){
        if(laeuft==true){
            laeuft=false;
            gameloop.suspend();
        }
        else{
            laeuft=true;  
            gameloop.resume();
        }
    }

}